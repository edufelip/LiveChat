CREATE TABLE conversation_state (
    conversation_id TEXT NOT NULL PRIMARY KEY,
    user_id TEXT NOT NULL DEFAULT '',
    role TEXT NOT NULL DEFAULT 'Member',
    joined_at INTEGER NOT NULL DEFAULT 0,
    left_at INTEGER,
    last_read_at INTEGER NOT NULL DEFAULT 0,
    last_read_seq INTEGER,
    mute_until INTEGER,
    archived INTEGER NOT NULL DEFAULT 0,
    is_pinned INTEGER NOT NULL DEFAULT 0,
    pinned_at INTEGER,
    settings TEXT
);

insertOrReplaceConversationState:
INSERT OR REPLACE INTO conversation_state(
    conversation_id,
    user_id,
    role,
    joined_at,
    left_at,
    last_read_at,
    last_read_seq,
    mute_until,
    archived,
    is_pinned,
    pinned_at,
    settings
)
VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);

getConversationState:
SELECT *
FROM conversation_state
WHERE conversation_id = ?;

observeConversationState:
SELECT *
FROM conversation_state
WHERE conversation_id = ?;
